import{g as d}from"./index-BlKrw9il.js";const a={},c=["chest pain","severe pain","crushing pain","can't breathe","cannot breathe","difficulty breathing","shortness of breath","dizzy","dizziness","faint","fainting","passed out","unconscious","severe headache","confusion","slurred speech","numbness","weakness","heart racing","palpitations","irregular heartbeat","bleeding","vomiting blood","severe swelling","blue lips","blue fingers","cold sweat"],h=["call 911","emergency","ambulance","help me","dying","heart attack","stroke","can't breathe","severe chest pain","crushing pain"],y=["medication","medicine","pill","prescription","dose","dosage","side effect","side-effect","drug","tablet","metoprolol","lisinopril","atorvastatin","aspirin","warfarin","blood thinner","statin"],m=["appointment","schedule","follow-up","follow up","visit","see doctor","see my doctor","cardiologist","clinic","office visit","check-up","checkup"],g=["anxious","anxiety","worried","scared","afraid","depressed","sad","overwhelmed","stressed","stress","can't sleep","insomnia","lonely","hopeless","frustrated","angry","upset"],f=["thank you","thanks","appreciate","grateful","helpful","great","good","excellent","perfect","wonderful"],p=["hello","hi ","hey","good morning","good afternoon","good evening","greetings","howdy"],w=["exercise","walk","walking","diet","food","eat","eating","nutrition","weight","sleep","sleeping","stress","activity","sodium","salt","water","hydration","alcohol","smoking"],v=["progress","recovery","healing","improving","better","worse","how am i doing","am i improving","getting better","doing okay","doing well"];function b(r,o){const i=r.toLowerCase();return h.some(e=>i.includes(e))?"emergency":c.some(e=>i.includes(e))?"symptom_report":p.some(e=>i.includes(e))?"greeting":f.some(e=>i.includes(e))?"gratitude":y.some(e=>i.includes(e))?"medication_question":m.some(e=>i.includes(e))?"appointment_request":g.some(e=>i.includes(e))?"emotional_support":w.some(e=>i.includes(e))?"lifestyle_question":v.some(e=>i.includes(e))?"progress_inquiry":["pain","hurts","ache","swelling","tired","fatigue","nausea","symptom","feeling","uncomfortable"].some(e=>i.includes(e))?"symptom_report":["health","recovery","heart","condition","vitals"].some(e=>i.includes(e))?"general_health":"unknown"}function k(r,o,i){const s=r.toLowerCase();if(o==="emergency"||c.some(e=>s.includes(e)))return"critical";const n={critical:["severe","extreme","worst","unbearable","can't","cannot"],high:["bad","serious","concerning","worried","increasing","getting worse"],medium:["moderate","some","mild","slight","occasional"]};return n.critical.some(e=>s.includes(e))?"critical":n.high.some(e=>s.includes(e))?"high":n.medium.some(e=>s.includes(e))?"medium":(i.riskLevel==="critical"||i.riskLevel==="high")&&o==="symptom_report"?"high":"low"}function I(r,o,i,s,n){const e=s.name.split(" ")[0];if(o==="emergency"||i==="critical")return{content:`${e}, I'm very concerned about what you're experiencing. Please call 911 immediately or go to the nearest emergency room. If you're having chest pain, difficulty breathing, or other severe symptoms, this is a medical emergency that needs immediate attention. I'm also alerting your care team right now.`,intent:o,severity:"critical",shouldEscalate:!0,suggestedActions:["Call 911","Go to ER","Contact emergency services"]};if(o==="greeting"){const t=[`Hello ${e}! How are you feeling today? I'm here to help with any questions or concerns.`,`Hi ${e}! Great to hear from you. What can I help you with today?`,`Good day, ${e}! I hope your recovery is going well. How can I assist you?`];return{content:t[Math.floor(Math.random()*t.length)],intent:o,severity:"low",shouldEscalate:!1,followUpQuestion:"Is there anything specific I can help you with today?"}}if(o==="gratitude")return{content:`You're very welcome, ${e}! I'm here whenever you need support. Your commitment to your recovery is inspiring. Keep up the great work! ðŸ’™`,intent:o,severity:"low",shouldEscalate:!1};if(o==="symptom_report"){const t=r.toLowerCase();return t.includes("chest pain")?{content:`${e}, chest pain needs to be taken seriously. Can you describe it more? Is it sharp, dull, or pressure-like? Does it come with shortness of breath or sweating? I'm alerting your care team now - they'll reach out within the hour. If the pain is severe or worsening, please call 911 immediately.`,intent:o,severity:"critical",shouldEscalate:!0,suggestedActions:["Monitor pain level","Rest","Call care team if worsens"],followUpQuestion:"On a scale of 1-10, how severe is the pain?"}:t.includes("short")&&t.includes("breath")?{content:`I understand you're experiencing shortness of breath, ${e}. This is important to address. Are you also experiencing swelling in your legs or sudden weight gain? I'm notifying your care team right away. Please rest and avoid physical activity. If breathing becomes severely difficult, call 911.`,intent:o,severity:"high",shouldEscalate:!0,suggestedActions:["Rest","Monitor breathing","Check for swelling"],followUpQuestion:"Have you noticed any swelling in your ankles or legs?"}:t.includes("dizz")||t.includes("lightheaded")?{content:`${e}, dizziness can be concerning after ${s.diagnosis}. Have you been taking your medications as prescribed? Sometimes blood pressure medications can cause this. I'm letting your care team know. Please sit or lie down, stay hydrated, and avoid sudden movements. They'll review your medications and vitals.`,intent:o,severity:"high",shouldEscalate:!0,suggestedActions:["Sit down","Stay hydrated","Avoid sudden movements"],followUpQuestion:"Did you take all your medications today as prescribed?"}:t.includes("swell")?{content:`Thanks for reporting the swelling, ${e}. Swelling can indicate fluid retention, which is important to monitor with your condition. Have you weighed yourself today? Any sudden weight gain? I'm alerting your care team - they may want to adjust your medications. In the meantime, try to elevate your legs and reduce salt intake.`,intent:o,severity:"medium",shouldEscalate:!0,suggestedActions:["Weigh yourself daily","Elevate legs","Reduce salt"],followUpQuestion:"Have you gained more than 2-3 pounds in the last few days?"}:t.includes("tired")||t.includes("fatigue")?{content:`${e}, fatigue is common during recovery from ${s.diagnosis}, but we want to make sure it's normal. How's your sleep? Are you getting 7-8 hours? Your care team will follow up to check your energy levels and possibly adjust your treatment plan. Make sure you're eating well and staying hydrated.`,intent:o,severity:"medium",shouldEscalate:i!=="low",suggestedActions:["Rest adequately","Stay hydrated","Eat nutritious meals"],followUpQuestion:"Are you able to do your normal daily activities, or is the fatigue limiting you?"}:{content:`Thank you for sharing that with me, ${e}. I've recorded your symptoms and notified your care team. They'll review this and reach out within 2 hours. In the meantime, please rest and monitor how you're feeling. If anything changes or gets worse, message us immediately or call the care line.`,intent:o,severity:i,shouldEscalate:!0,suggestedActions:["Rest","Monitor symptoms","Stay hydrated"],followUpQuestion:"Is there anything else you're experiencing that I should know about?"}}if(o==="medication_question"){const t=r.toLowerCase();return t.includes("side effect")?{content:`${e}, it's important to address medication side effects. What symptoms are you experiencing? Some side effects are normal and temporary, while others need attention. I'm alerting your care team so they can review your medications. Never stop taking your heart medications without talking to your doctor first - it could be dangerous.`,intent:o,severity:"high",shouldEscalate:!0,suggestedActions:["Document side effects","Continue medications","Wait for care team"],followUpQuestion:"What specific side effects are you experiencing?"}:t.includes("forgot")||t.includes("missed")?{content:`If you missed a dose, ${e}, don't double up on the next one. Just take your next scheduled dose. For your heart medications, consistency is really important for your recovery. Consider setting phone alarms or using a pill organizer. I'll have your care team reach out about strategies to help you stay on track.`,intent:o,severity:"medium",shouldEscalate:!0,suggestedActions:["Take next dose on schedule","Set medication reminders","Use pill organizer"]}:t.includes("when")||t.includes("time")?{content:`Great question about medication timing, ${e}. It's best to take your heart medications at the same time each day. Your care team will reach out with specific guidance for your prescriptions. Generally, morning medications help protect you throughout the day. Check your prescription labels or your discharge instructions for specific timing.`,intent:o,severity:"low",shouldEscalate:!1,suggestedActions:["Check prescription labels","Set daily reminders","Create routine"]}:{content:`That's a great question about your medications, ${e}. Your heart medications are crucial for your recovery from ${s.diagnosis}. I'm connecting you with your care team - they have access to your complete medication list and can give you detailed guidance. They'll respond within 2 hours.`,intent:o,severity:"medium",shouldEscalate:!0,suggestedActions:["Continue current medications","Wait for care team response"]}}if(o==="appointment_request"){const t=s.nextAppointment?new Date(s.nextAppointment).toLocaleDateString():"not yet scheduled";return{content:`I can help with that, ${e}! Your next appointment is currently ${t}. I'm notifying your care coordinator who will reach out within 4 hours to schedule or reschedule your appointment. Is this for a routine follow-up or do you have specific concerns we should address?`,intent:o,severity:"low",shouldEscalate:!0,suggestedActions:["Wait for care coordinator","Prepare questions for appointment"],followUpQuestion:"Is this a routine follow-up or do you have specific symptoms you need to discuss?"}}if(o==="emotional_support"){const t=r.toLowerCase();return t.includes("anxious")||t.includes("anxiety")||t.includes("worried")?{content:`${e}, it's completely normal to feel anxious after ${s.diagnosis}. Your feelings are valid, and you're not alone in this. Recovery is not just physical - your mental health matters too. Try some deep breathing: breathe in for 4 counts, hold for 4, breathe out for 4. I'm connecting you with our care team who can provide counseling resources and possibly medication if needed.`,intent:o,severity:"medium",shouldEscalate:!0,suggestedActions:["Practice deep breathing","Talk to care team","Consider counseling"],followUpQuestion:"Would you like information about our cardiac counseling services?"}:t.includes("depressed")||t.includes("sad")||t.includes("hopeless")?{content:`${e}, I'm really glad you reached out. Depression after a cardiac event is more common than you might think - you're not alone. Your mental health is just as important as your physical recovery. I'm alerting your care team right away. They can connect you with a counselor who specializes in cardiac recovery. If you're having thoughts of self-harm, please call 988 (Suicide Prevention Lifeline) immediately.`,intent:o,severity:"high",shouldEscalate:!0,suggestedActions:["Talk to care team","Consider counseling","Call 988 if needed"],followUpQuestion:"Would you like me to have someone call you today to talk about this?"}:t.includes("sleep")||t.includes("insomnia")?{content:`Sleep problems are frustrating, ${e}, and they can impact your recovery. Good sleep helps your heart heal. Try keeping a consistent bedtime, avoiding screens an hour before bed, and making your room cool and dark. I'm letting your care team know - they can check if any of your medications might be affecting sleep and suggest solutions.`,intent:o,severity:"medium",shouldEscalate:!0,suggestedActions:["Keep consistent sleep schedule","Limit screen time before bed","Review medications"]}:{content:`Thank you for sharing how you're feeling, ${e}. Recovering from ${s.diagnosis} is challenging - both physically and emotionally. It's a sign of strength to talk about it. Your care team is here to support all aspects of your recovery. They'll reach out soon to see how they can help. Remember, you're doing great by staying engaged in your care! ðŸ’™`,intent:o,severity:"medium",shouldEscalate:!0,suggestedActions:["Stay connected","Talk to care team","Practice self-compassion"]}}if(o==="lifestyle_question"){const t=r.toLowerCase();return t.includes("exercise")||t.includes("walk")?{content:`Great question about exercise, ${e}! Physical activity is important for your recovery from ${s.diagnosis}. Start slowly - even 5-10 minute walks are beneficial. Listen to your body and stop if you feel chest pain, severe shortness of breath, or dizziness. Your care team can provide personalized exercise guidelines. Many patients benefit from cardiac rehab programs.`,intent:o,severity:"low",shouldEscalate:!1,suggestedActions:["Start with short walks","Listen to your body","Ask about cardiac rehab"],followUpQuestion:"Have you been referred to a cardiac rehabilitation program?"}:t.includes("diet")||t.includes("food")||t.includes("eat")?{content:`Nutrition is a key part of your recovery, ${e}! Focus on a heart-healthy diet: lots of vegetables, fruits, whole grains, lean proteins, and healthy fats. Limit sodium (aim for under 2000mg/day), avoid processed foods, and watch portion sizes. I can have our nutritionist reach out with personalized meal planning if you'd like.`,intent:o,severity:"low",shouldEscalate:!1,suggestedActions:["Eat heart-healthy foods","Limit sodium","Read nutrition labels"],followUpQuestion:"Would you like to speak with our nutritionist for personalized meal planning?"}:t.includes("sodium")||t.includes("salt")?{content:`Good thinking about sodium, ${e}! Excess salt can increase blood pressure and fluid retention, which is especially important to avoid with ${s.diagnosis}. Aim for less than 2000mg daily. Avoid processed foods, canned soups, and restaurant meals - they're often very high in sodium. Read labels carefully!`,intent:o,severity:"low",shouldEscalate:!1,suggestedActions:["Read food labels","Avoid processed foods","Track daily sodium"]}:{content:`That's a great question about healthy lifestyle, ${e}! Making positive changes really supports your recovery from ${s.diagnosis}. Your care team can provide specific guidance tailored to your situation. I'm letting them know you have questions about lifestyle modifications.`,intent:o,severity:"low",shouldEscalate:!1,suggestedActions:["Focus on heart-healthy habits","Ask care team for guidance"]}}if(o==="progress_inquiry"){const t=s.recoveryStreak||0,l=s.riskLevel==="low"||s.riskLevel==="medium";return{content:`${e}, you're making ${l?"excellent":"steady"} progress! You've completed ${t} daily check-ins in a row - that's fantastic commitment. ${l?"Your care team is pleased with your recovery trajectory.":"Your care team is closely monitoring your recovery."} Keep up your medications, healthy eating, gentle exercise, and daily check-ins. Your dedication is the key to successful recovery! ðŸ’™`,intent:o,severity:"low",shouldEscalate:!1,suggestedActions:["Continue daily check-ins","Maintain healthy habits","Stay consistent with medications"],followUpQuestion:"Is there any specific aspect of your recovery you'd like to know more about?"}}return o==="general_health"?{content:`Thanks for checking in, ${e}. Your recovery from ${s.diagnosis} is important to us. I'm here to help with any questions about your medications, symptoms, appointments, or lifestyle changes. What specific aspect of your health would you like to discuss?`,intent:o,severity:"low",shouldEscalate:!1,followUpQuestion:"What would you like to know more about - medications, symptoms, diet, exercise, or appointments?"}:{content:`Thank you for your message, ${e}. I want to make sure I understand correctly so I can help you best. Could you tell me a bit more? For example, are you asking about symptoms, medications, appointments, or something else? A care team member is available to chat if you'd prefer to speak with someone directly.`,intent:"unknown",severity:"low",shouldEscalate:!1,followUpQuestion:"What would you most like help with today?",suggestedActions:["Provide more details","Choose a topic","Request call back"]}}function u(r){return a[r]||(a[r]={recentIntents:[],lastMessageTime:Date.now(),escalationCount:0}),a[r]}function E(r,o,i){const s=u(r);s.recentIntents.push(o),s.recentIntents.length>5&&s.recentIntents.shift(),i&&s.escalationCount++,s.lastMessageTime=Date.now()}function $(r,o){const i=d(r);if(!i)return{content:"I'm having trouble accessing your patient information. Please try again or contact support.",intent:"unknown",severity:"low",shouldEscalate:!0};u(r);const s=b(o),n=k(o,s,i),e=I(o,s,n,i);return E(r,s,e.shouldEscalate),e}export{$ as generateSmartResponse};
